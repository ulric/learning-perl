#!/usr/local/bin/perl

use Config;
use strict;
use warnings;

my $separator = $Config{path_sep};
my $pattern = shift(@ARGV);

if ( $pattern eq "" or $pattern eq "?" or $pattern eq "--help" ) {
    die "Usage: rhich PATTERN - the PATTERN is matched against all program names found in PATH.";
}

if (shift(@ARGV) ne "") {
	print "Warning: Excessive parameter(s) are ignored.\n";
}

my @pfade = split /$separator/, $ENV{"PATH"};
my $pfad;
my @programs;
my $listing;
my @liste;
my $name;

foreach $pfad (@pfade) {
    if (-e $pfad) {
        $listing = (qx(ls -1 $pfad));
		@liste=split /\n/, $listing;
		foreach $name (@liste) {
	        push @programs, $name;
		}
    }
}

my $program;
foreach $program (@programs) {
	$_=$program;
    if (/$pattern/) {
		print $program, ":\n";
		system "which $program";
		print "\n";
	}
}
exit 0

# vim: sw=4
