#!/usr//bin/env perl

use 5.010;
use strict;
use warnings;
use Config;
use File::Spec;

die "Usage: rhich PATTERN - The search pattern is mandatory.\n" unless defined $ARGV[0];

my $separator=$Config{path_sep};
my $pattern=shift @ARGV;
my @paths=split /$separator/, $ENV{"PATH"};

foreach my $path (@paths) {
  next unless -e $path; 
  my @files=glob File::Spec->catfile ($path, $pattern);
  foreach my $file (@files) {
    if (-x $file and !-d $file) {
      say File::Spec->catfile ($path, $file);
    }
  }
}

exit 0

# vim: sw=2
